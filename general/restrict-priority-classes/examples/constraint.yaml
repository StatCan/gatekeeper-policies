apiVersion: constraints.gatekeeper.sh/v1beta1
kind: RestrictPriorityClasses
metadata:
  name: restrict-priority-classes-solutions
  annotations:
    kubernetes.io/description: |
      Restricts the types of priority classes that can be used by solution builders of critical priority.
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
    namespaceSelector:
      matchExpressions:
      - key: project.statcan.gc.ca/purpose
        operator: In
        value: solution
      - key: project.statcan.gc.ca/priority
        operator: In
        value: critical
  parameters:
    # The names of the priority classes that can be used.
    priorityClassNames:
      - 'business-value-medium'
      - 'business-value-critical'
---
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: RestrictPriorityClasses
metadata:
  name: restrict-priority-classes-solutions
  annotations:
    kubernetes.io/description: |
      Restricts the types of priority classes that can be used by solution builders of medium priority.
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
    namespaceSelector:
      matchExpressions:
      - key: project.statcan.gc.ca/purpose
        operator: In
        value: solution
      - key: project.statcan.gc.ca/priority
        operator: In
        value: medium
  parameters:
    # The names of the priority classes that can be used.
    priorityClassNames:
      - 'business-value-medium'
